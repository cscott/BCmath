<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>BCmath documentation</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>BCmath</h1>


<h2>Contents</h2>
<ul>
<li><a href="#Modulo_operation">Modulo operation </a></li>
<li><a href="#False_precision">False precision </a></li>
<li><a href="#Arbitrary_precision_fixed_point_arithmetic">Arbitrary-precision fixed-point arithmetic </a></li>
<li><a href="#Representation">Representation </a></li>
</ul>


<h2>Topics</h2>
<ul class="">
  <li><strong>Pitfalls</strong></li>
  <li><a href="../topics/databases.md.html">Databases</a></li>
</ul>
<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../index.html">BCmath</a></li>
</ul>

</div>

<div id="content">


<h1>Pitfalls</h1>

<p>This describes common pitfalls with the <a href="https://www.mediawiki.org/wiki/Extension:BCmath">BCmath extension</a>, the <a href="https://www.php.net/manual/en/book.bc.php">bcmath library</a>, and the <a href="https://en.wikipedia.org/wiki/Bc_(programming_language">bc programming language</a>.</p>

<p><a name="Modulo_operation"></a></p>
<h2>Modulo operation</h2>

<p>The <a href="https://en.wikipedia.org/wiki/Modulo_operation">modulo operation</a> exists in several variants. In particular Lua uses <em>floored division</em> while Bc uses <em>truncated division</em>. For the most common situations, where both dividend and divisor is positive, the results are the same. Any use where dividend or divisor, or both, are negative might give discrepancies. This does not imply that any specific variant is wrong, they are just different.</p>

<p><a name="False_precision"></a></p>
<h2>False precision</h2>

<p>Using <a href="https://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic">arbitrary-precision arithmetic</a> can easily lead to <a href="https://en.wikipedia.org/wiki/False_precision">false precision</a>. Numbers with a given precision can be combined, for example with addition or multiply, and accumulate more and more digits.</p>

<p>A simple example of addition</p>


<pre>
<span class="number">1.1</span>?
<span class="number">0.01</span>
<span class="number">1</span>,<span class="number">1</span>?
</pre>

<p>Do we really have two decimal places, or just one? The second decimal place in the first number is really unknown, and we can't really say what is more likely.</p>

<p>With multiply the problem gets more pronounced</p>


<pre>
<span class="number">1.2</span> √ó <span class="number">1.2</span>
   <span class="number">24</span>
  <span class="number">12</span>?
  <span class="number">144</span>
</pre>

<p>The summation will then contain digits without sufficient certainty, unless the answer is rounded or otherwise truncated.</p>

<p><a name="Arbitrary_precision_fixed_point_arithmetic"></a></p>
<h2>Arbitrary-precision fixed-point arithmetic</h2>

<p>This library implements arbitrary-precision fixed-point arithmetic by scaling (shifting) arbitrary-precision integers. This is a rather simple solution that solves most problems with big numbers. It has some additional support for converting floating-point numbers into such fixed-point numbers. It does not implement so-called arbitrary-precision floating-point arithmetic.</p>

<p><a name="Representation"></a></p>
<h2>Representation</h2>

<p>Numbers are represented during calculations as a <a href="https://en.wikipedia.org/wiki/Significand">significand</a> that contains a sign and an integral part, and may also contain a decimal point and a fractional part. Withing Lua the ‚Äúnumbers‚Äù are stored inside closures that export its members as tables, and can also contain undefined ‚Äúnumbers‚Äù. It is not possible to use those for calculations. The exported API can use Lua numbers as arguments, and also raw strings.</p>

<p>Raw strings as arguments can be written in <a href="https://en.wikipedia.org/wiki/Scientific_notation">scientific notation</a> and some <a href="https://en.wikipedia.org/wiki/Engineering_notation">engineering notations</a>. It does not support localized notation, but other functions may support this.</p>

<p>Examples on valid numbers</p>

<ul>
    <li>123</li>
    <li>+123 ‚Äì 'plus sign' (U+002B)</li>
    <li>‚àí123 - 'minus sign' (U+2212)</li>
    <li>-123 - 'minus hyphen' (U+002D)</li>
    <li>123.456</li>
    <li>123 . 456 ‚Äì adding spaces should not create problems</li>
    <li>123.456√ó10+789 ‚Äì 'multiplication sign' (U+00D7)</li>
    <li>123.456√ó10‚Å∑‚Å∏‚Åπ ‚Äì exponent with superscript digits, also superscript plus and minus</li>
    <li>123 . 456 √ó 10 + ‚Å∑‚Å∏‚Åπ ‚Äì can mix ordinary plus-minus and superscript digits</li>
    <li>123.456e+789 ‚Äì engineering notation</li>
    <li>123.456e‚Å∑‚Å∏‚Åπ ‚Äì engineering notation with superscript</li>
    <li>123.456E789 ‚Äì 'capital E' (Algol)</li>
    <li>123.456D789 ‚Äì 'capital D' (FORTRAN, Sharp)</li>
    <li>123.456‚è®789 ‚Äì 'decimal exponent symbol' (Unicode)</li>
    <li>123.456&amp;789 ‚Äì 'ampersand' (Simula)</li>
    <li>123.456ùóò789 ‚Äì 'mathematical sans-serif capital E' (Texas) </li>
    <li>123.456^789</li>
</ul>

<p>It is not clear whether only ordinary letters should be allowed, or all the mathematical variants.</p>

<p>Superscript can only be used for the exponent, and only after an exponent marker has been found.</p>

<p>If a string (or number) fails to decode, then the value will become undefined,and later use of that number will fail.</p>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc TESTING</a></i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>

